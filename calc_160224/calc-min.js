var mychart=false;var pieData=[{value:100,color:"#FDB45C",highlight:"#FFC870",label:"Glucides"},{value:100,color:"#F7464A",highlight:"#FF5A5E",label:"Protéines"},{value:100,color:"#46BFBD",highlight:"#5AD3D1",label:"Lipides"}];function calc_basic(){var i=$("input[name=gender]:checked").val();var e=$("input[name=weight]").val();var l=$("input[name=height]").val();var k=$("input[name=age]").val();var f=$("select[name=exercise]").val();var g=$("input[name=carbs_g]").val();var a=$("input[name=body_fat_pct]").val();var m=$("input[name=protein_g]").val();var j=$("input[name=deficit]").val();var h=false;var b=false;if(!e||e==""||e<40||e>200){h="Poids devrait se situer entre 40 kg et 200 kg."}else{if(!l||l==""||l<140||l>210){h="Taille devrait se situer entre 140 cm et 210 cm."}else{if(!k||k==""||k<18||k>80){h="Age devrait se situer entre 18 ans et 80 ans."}else{b=10*e+6.25*l-5*k+((i==="male")?5:-161);$(".ree").html(Math.round(b))}}}if(b){$(".show_if_ree").show()}else{$(".show_if_ree").hide()}var d=false;if(b){if(f==0||f==1||f==2||f==3||f==4){d=b*(1.2+f*0.175);$(".tdr").html(Math.round(d))}}if(d){$(".show_if_tdr").show()}else{$(".show_if_tdr").hide()}var c=false;if(d){if(!g||g==""||g<0||g>50){h="Glucides devrait se situer entre 0 g et 50 g."}else{c=4*g}}if(c){$(".show_if_carbs_kcal").show()}else{$(".show_if_carbs_kcal").hide()}body_fat_kg=false;if(c){if(!a||a==""||a<0||a>50){h="Masse grasse devrait se situer entre 0 % et 50 %."}else{body_fat_kg=e*(a/100);lean_kg=e-body_fat_kg;protein_min_g=1.32*lean_kg;protein_max_g=2.2*lean_kg;protein_exercise=protein_min_g+((protein_max_g-protein_min_g)*f/4);$(".protein_min_g").html(Math.ceil(protein_min_g));$(".protein_max_g").html(Math.floor(protein_max_g));$(".protein_exercise").html(Math.round(protein_exercise))}}if(body_fat_kg){$(".show_if_body_fat_kg").show()}else{$(".show_if_body_fat_kg").hide()}protein_kcal=false;if(body_fat_kg){if(!m||m==""|m<protein_min_g||m>protein_max_g){h="Protéines devrait se situer entre "+Math.ceil(protein_min_g)+" g et "+Math.floor(protein_max_g)+" g."}else{protein_kcal=4*m;kcal_max=d;kcal_min=Math.max(d-(28*2.20462*body_fat_kg),30*9+c+protein_kcal);if(kcal_min<(0.7*kcal_max)){kcal_min=0.7*kcal_max}deficit_max=(1-(kcal_min/kcal_max))*100;$(".kcal_max").html(Math.round(kcal_max));$(".kcal_min").html(Math.round(kcal_min));$(".deficit_max").html(Math.floor(deficit_max))}}if(protein_kcal){$(".show_if_protein_kcal").show()}else{$(".show_if_protein_kcal").hide()}fat_kcal=false;if(protein_kcal){if(!j||j==""||j<0||j>deficit_max){h="Déficit énergétique devrait se situer entre 0 % et "+Math.floor(deficit_max)+" %. Nous conseillons un déficit entre 20% et 30% pour une perte de poids optimale."}else{fat_kcal=d*((100-j)/100)-c-protein_kcal;fat_g=fat_kcal/9;actual_kcal=fat_kcal+c+protein_kcal;fat_kcal_pct=100*fat_kcal/actual_kcal;carbs_kcal_pct=100*c/actual_kcal;protein_kcal_pct=100*protein_kcal/actual_kcal;$(".carbs_kcal").html(Math.round(c));$(".protein_kcal").html(Math.round(protein_kcal));$(".fat_kcal").html(Math.round(fat_kcal));$(".carbs_kcal_pct").html(Math.round(carbs_kcal_pct));$(".protein_kcal_pct").html(Math.round(protein_kcal_pct));$(".fat_kcal_pct").html(Math.round(fat_kcal_pct));$(".carbs_g").html(Math.round(g));$(".protein_g").html(Math.round(m));$(".fat_g").html(Math.round(fat_g));$(".actual_kcal").html(Math.round(actual_kcal));mychart.segments[0].value=Math.round(carbs_kcal_pct);mychart.segments[1].value=Math.round(protein_kcal_pct);mychart.segments[2].value=Math.round(fat_kcal_pct);mychart.update()}}if(fat_kcal){$(".show_if_fat_kcal").show()}else{$(".show_if_fat_kcal").hide()}if(h){$(".error").html(h).show()}else{$(".error").hide()}}function write_cookies(){$.cookie("gender",$("input[name=gender]:checked").val(),{expires:30});$.cookie("weight",$("input[name=weight]").val(),{expires:30});$.cookie("height",$("input[name=height]").val(),{expires:30});$.cookie("age",$("input[name=age]").val(),{expires:30});$.cookie("exercise",$("select[name=exercise]").val(),{expires:30});$.cookie("carbs_g",$("input[name=carbs_g]").val(),{expires:30});$.cookie("body_fat_pct",$("input[name=body_fat_pct]").val(),{expires:30});$.cookie("protein_g",$("input[name=protein_g]").val(),{expires:30});$.cookie("deficit",$("input[name=deficit]").val(),{expires:30})}function read_cookies(){if($.cookie("gender")=="male"){$("input[name=gender][value=male]").prop("checked",true)}if($.isNumeric($.cookie("weight"))){$("input[name=weight]").val($.cookie("weight"))}if($.isNumeric($.cookie("height"))){$("input[name=height]").val($.cookie("height"))}if($.isNumeric($.cookie("age"))){$("input[name=age]").val($.cookie("age"))}if($.isNumeric($.cookie("exercise"))){$("select[name=exercise]").val($.cookie("exercise"))}if($.isNumeric($.cookie("carbs_g"))){$("input[name=carbs_g]").val($.cookie("carbs_g"))}if($.isNumeric($.cookie("body_fat_pct"))){$("input[name=body_fat_pct]").val($.cookie("body_fat_pct"))}if($.isNumeric($.cookie("protein_g"))){$("input[name=protein_g]").val($.cookie("protein_g"))}if($.isNumeric($.cookie("deficit"))){$("input[name=deficit]").val($.cookie("deficit"))}}$(document).ready(function(){Chart.defaults.global.animation=false;ctx=$("#chart-area").get(0).getContext("2d");mychart=new Chart(ctx).Pie(pieData);read_cookies();calc_basic();$(".basic").on("change input",function(a){write_cookies();calc_basic()})});